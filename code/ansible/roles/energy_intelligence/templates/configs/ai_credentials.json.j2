{
  "mqtt_credentials": {
    "broker_host": "{{ mqtt_broker_host | default('localhost') }}",
    "port": 1883,
    "username": "iot",
    "password": "iot123",
    "client_prefix": "energy_ai",
    "keepalive": 60,
    "qos_default": 1
  },
  "influxdb_credentials": {
    "url": "{{ influxdb_url | default('http://localhost:8086') }}",
    "token": "{{ influxdb_token.content | b64decode | trim if influxdb_token is defined else 'demo-token' }}",
    "organization": "{{ influxdb_org | default('iot') }}",
    "timeout": 5000,
    "verify_ssl": false
  },
  "external_apis": {
    "weather_api": {
      "provider": "openweathermap",
      "api_key": "{{ external_apis.weather.api_key | default('demo_key') }}",
      "rate_limit_requests_per_minute": 60,
      "retry_attempts": 3
    },
    "electricity_market": {
      "provider": "rte_france", 
      "api_key": "demo_key",
      "base_url": "https://digital.iservices.rte-france.com",
      "enabled": false
    },
    "carbon_api": {
      "provider": "co2signal",
      "api_key": "demo_key",
      "enabled": false
    }
  },
  "security": {
    "encrypt_sensitive_data": true,
    "log_level": "INFO",
    "mask_credentials_in_logs": true,
    "token_refresh_interval_hours": 24
  },
  "ai_models": {
    "model_storage_path": "{{ energy_ai_paths.models | default('/opt/energy-ai/models') }}",
    "auto_retrain_enabled": true,
    "retrain_interval_days": 7,
    "model_validation_threshold": 0.85
  },
  "notifications": {
    "email": {
      "enabled": false,
      "smtp_server": "localhost",
      "smtp_port": 587,
      "from_address": "energy-ai@{{ ansible_domain | default('localhost') }}",
      "to_addresses": ["admin@{{ ansible_domain | default('localhost') }}"]
    },
    "slack": {
      "enabled": false,
      "webhook_url": "",
      "channel": "#energy-alerts"
    },
    "teams": {
      "enabled": false,
      "webhook_url": ""
    }
  },
  "backup": {
    "backup_credentials_enabled": true,
    "backup_interval_hours": 24,
    "backup_retention_days": 30,
    "backup_location": "{{ energy_ai_paths.data | default('/opt/energy-ai/data') }}/backups"
  }
}